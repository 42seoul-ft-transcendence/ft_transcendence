<!DOCTYPE html>

<html lang="en">

<head>

	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>PONG Tournament</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
	<nav class="navbar navbar-expand bg-primary navbar-dark fixed-top px-4 py-3">
		<div class="container-fluid">
			<a class="navbar-brand" href="#">PONG</a>
			<ul class="navbar-nav ms-auto">
				<li class="nav-item">
					<div class="icon">
						<img src="https://via.placeholder.com/40" alt="Profile Icon">
					</div>
				</li>
			</ul>
		</div>
	</nav>

	<div>
		<div class="content d-flex justify-content-center align-items-center vh-100">
			<div class="game-screen bg-black d-flex flex-column justify-content-center align-items-center p-4 mb-5">
				<button class="btn btn-light fw-bold text-decoration-underline fs-4 w-75 py-2 mb-4">1 vs 1</button>
				<button class="btn btn-light fw-bold text-decoration-underline fs-4 py-2 w-75" data-bs-toggle="modal"
					data-bs-target="#tournamentModal">
					Tournament
				</button>
			</div>
		</div>
	</div>

	<div class="modal fade" id="tournamentModal" tabindex="-1" aria-labelledby="tournamentModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="tournamentModalLabel">Tournament</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<p>How many people do you want to play?</p>
					<select id="playerCount" class="form-select w-50 mx-auto">
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5</option>
						<option value="6">6</option>
						<option value="7">7</option>
						<option value="8">8</option>
					</select>
				</div>

				<div class="modal-footer">
					<button type="button" class="btn btn-primary" id="nextButton">Next</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="nicknameModal" tabindex="-1" aria-labelledby="nicknameModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="nicknameModalLabel">Enter Player Nickname</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<p id="playerNicknamePrompt"></p>
					<input type="text" class="form-control w-75 mx-auto" id="playerNicknameInput" placeholder="Enter nickname">
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" id="nextPlayerButton">Next</button>
				</div>
			</div>
		</div>
	</div>


	<div class="tournament-page bg-light">
		<h2 class="text-center mb-4">Tournament Matches</h2>
		<div id="matchList" class="container"></div>
	</div>
	<!-- Bootstrap 5.3.3 JS -->

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

	<script>
		let currentPlayer = 0;
		let totalPlayers = 0;
		const playerNicknames = [];

		document.getElementById('nextButton').addEventListener('click', function () {
			totalPlayers = parseInt(document.getElementById('playerCount').value);
			currentPlayer = 1;
			document.getElementById('playerNicknamePrompt').textContent = `Player ${currentPlayer} Nickname`;
			const tournamentModal = bootstrap.Modal.getOrCreateInstance(document.getElementById('tournamentModal'));
			const nicknameModal = bootstrap.Modal.getOrCreateInstance(document.getElementById('nicknameModal'));
			tournamentModal.hide();
			nicknameModal.show();
		});

		document.getElementById('nextPlayerButton').addEventListener('click', function handleNicknameInput() {
			const nicknameInput = document.getElementById('playerNicknameInput');
			const nickname = nicknameInput.value.trim();

			if (!nickname) {
				alert('Please enter a nickname!');
				return;
			}

			playerNicknames.push(nickname);
			nicknameInput.value = ''; // Clear the input field
			currentPlayer++;

			if (currentPlayer > totalPlayers) {
				const nextPlayerButton = document.getElementById('nextPlayerButton');
				nextPlayerButton.textContent = 'Start';
				nextPlayerButton.removeEventListener('click', handleNicknameInput);
				nextPlayerButton.addEventListener('click', showTournamentPage);
			} else {
				document.getElementById('playerNicknamePrompt').textContent = `Player ${currentPlayer} Nickname`;
			}
		});

		function showTournamentPage() {
			const nicknameModal = bootstrap.Modal.getOrCreateInstance(document.getElementById('nicknameModal'));
			nicknameModal.hide();
			const tournamentPage = document.querySelector('.tournament-page');
			tournamentPage.style.display = 'block';

			const matchList = document.getElementById('matchList');
			matchList.innerHTML = ''; // Clear previous matches

			let byePlayer = null;
			if (playerNicknames.length % 2 !== 0) {
				byePlayer = playerNicknames.pop(); // Remove the last player for bye
			}

			for (let i = 0; i < playerNicknames.length; i += 2) {
				const match = document.createElement('div');
				match.className = 'match text-center p-3 border rounded bg-white';
				match.textContent = `${playerNicknames[i]} vs ${playerNicknames[i + 1]}`;
				matchList.appendChild(match);
			}
			if (byePlayer) {
				const byeMatch = document.createElement('div');
				byeMatch.className = 'match text-center p-3 border rounded bg-warning';
				byeMatch.textContent = `${byePlayer} gets a bye to the next round`;
				matchList.appendChild(byeMatch);
			}
		}
	</script>
</body>

</html>

<div id="bodyCtn">
	<div id="boardCtn" style="position: relative;">
		<canvas id="board" height="500" width="500"></canvas>
	</div>
	<div id="selectModeCtn">
		<div class="game-screen bg-black d-flex flex-column justify-content-center align-items-center gap-3 p-4 mb-5">
			<button id="oneToOne" class="btn btn-light fw-bold text-decoration-underline fs-3 py-3 w-75">1 vs 1</button>
			<button class="btn btn-light fw-bold text-decoration-underline fs-3 py-3 w-75" data-bs-toggle="modal"
				data-bs-target="#tournamentModal">tournament</button>
		</div>
		<div>
			<div class="modal fade" id="tournamentModal" tabindex="-1" aria-labelledby="tournamentModalLabel"
				aria-hidden="true">
				<div class="modal-dialog modal-dialog-centered">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="tournamentModalLabel">Tournament</h5>
							<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
						</div>
						<div class="modal-body">
							<p>How many people do you want to play?</p>
							<select id="playerCount" class="form-select w-50 mx-auto">
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5</option>
								<option value="6">6</option>
								<option value="7">7</option>
								<option value="8">8</option>
							</select>
						</div>

						<div class="modal-footer">
							<button type="button" class="btn btn-primary" id="nextButton">Next</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>